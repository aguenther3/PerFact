<!DOCTYPE html>
<html lang="de">

<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<head>
	<link rel="stylesheet" href="bootstrap-3.3.7-dist/css/bootstrap.css">
	<link rel="stylesheet" href="bootstrap-3.3.7-dist/jquery-ui-1.12.1.custom/jquery-ui.min.css">
	<link rel="stylesheet" href="prototyp.css">

	<script src="bootstrap-3.3.7-dist/jquery/jquery-3.1.1.js"></script>
	<script src="bootstrap-3.3.7-dist/jquery-ui-1.12.1.custom/jquery-ui.min.js"></script>

	<script src="bootstrap-3.3.7-dist/js/bootstrap.js"></script>

	<script src="tinymce/js/tinymce/tinymce.min.js"></script>
	<script src="tinymce/js/tinymce/jquery.tinymce.min.js"></script>


	<script>
		tinymce.init({
			selector: '#mytextarea',
			statusbar: false,
			menubar: false,
			height : "220"

		});
	</script>

	

</head>


<body>

	<div>
		<div>
			<img src="header.png"\>
		</div>
		<div class="row">
			<div class="col-xs-3">
				<div class="img">
					<img src="sidebar.png"\>
				</div>
			</div>
			<div class="col-xs-9" style="margin-left: -130px">
				<div style="margin-top: 20px">


					<!-- Nav-Bar top -->
					<nav class="navbar navbar-default" style="border-width: 2px">
						<ul class="nav navbar-nav navbar-right">
							<li>
								<p class="navbar-text" style="margin-right: 5px">
									Ticket
								</p>
							</li>
							<li style="margin-right: 25px">
								<div class="btn-group" role="group" id="inlineFormCustomSelect">
									<div class="btn-group" role="group">
										<button type="button" class="btn btn-default btn-xs navbar-btn dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
											--
											<span class="caret">
											</span>
										</button>
										<ul class="dropdown-menu">
											<li>
												<a href="#">
													T456
												</a>
											</li>
											<li>
												<a href="#">
													T789
												</a>
											</li>
										</ul>
									</div>
									<button type="button" class="btn btn-default btn-xs navbar-btn" aria-label="Left Align">
										<span class="glyphicon glyphicon-search" aria-hidden="true">
										</span>
									</button>
								</div>
							</li>
							<li>
								<a href="ticket_liste_annahme.html">
									<span class="glyphicon glyphicon-list" aria-hidden="true">
									</span>
									<span>
										Ticketliste
									</span>
								</a>
							</li>
							<li>
								<a href="ticket_erstellen_annahme.html">
									<span class="glyphicon glyphicon-log-in" aria-hidden="true">
									</span>
									<span style="margin-right: 20px">
										neues Ticket
									</span>
								</a>
							</li>
						</ul>
					</nav>



					<!-- Ticket -->
					<div>
						<div style="margin-top: 20px">
							<div class="panel panel-default" style="border-width: 2px">


								<!-- Ticket-Head -->
								<div style="border-bottom-style: solid;border-bottom-width: 2px;border-bottom-color: #e5e5e5;">
									<div class="panel-body"">
										<div style="margin-bottom:30px">
											<h3>
												neues Ticket
												<br>
												<small>
													Bitte beschreiben Sie das Anliegen des Kunden und hinterlegen Sie die Kontaktdaten. Lorem ipsum dolor met consectetur adipisicing sit amet, consectetur adipisicing elit, of sed magna aliqua. Lorem ipsum dolor met.
												</small>
											</h3>
										</div>
									</div>
								</div>


								<!-- Ticket-Body -->
								<div class="panel-body">
									<ul class="nav nav-pills nav-steps nav-justified" id="navTabBar">
										<li class="active disabled">
											<a href="#tab1" class="tab-link">
												<span class="badge">
													1
												</span>
												<!-- <span class="glyphicon glyphicon-send"></span> -->
												<span>
													Anliegen
												</span>
											</a>
										</li>
										<li>
											<a href="#tab2" class="tab-link">
												<span class="badge">
													2
												</span>
												<!-- <span class="glyphicon glyphicon-envelope"></span> -->
												<span>
													Kontakt
												</span>
											</a>
										</li>
										<li>
											<a href="#tab3" class="tab-link">
												<span class="badge">
													3
												</span>
												<!-- <span class="glyphicon glyphicon-envelope"></span> -->
												<span>
													Spezifikation
												</span>
											</a>
										</li>
										<li>
											<a href="#check" class="tab-link">
												<span class="badge">
													4
												</span>
												<!-- <span class="glyphicon glyphicon-credit-card"></span> -->
												<span>
													Pr&uuml;fen und Abschlie&szlig;en
												</span>
											</a>
										</li>
									</ul>
								</div>
								<div class="panel-body">
									<div class="tab-content">

										<!-- Tab1 -->
										<div class="panel-body tab-pane active" id="tab1">
											<div class="form-group">
												<label for"subject_input" class="control-label">
													Betreff *
												</label>
												<input id="subject_input" class="form-control required" type="text">
												<div class="help-block">Pflichtfeld, bitte ausf&uuml;llen!</div>
											</div>
											<div class="form-group">
												<label for"geraet_input" class="control-label">
													Ger&auml;t *
												</label>
												<select class="form-control required" id="geraet_input">
													<option selected></option>
													<option value="Kaffeemaschine">Kaffeemaschine</option>
													<option value="Waschmaschine">Waschmaschine</option>
                                                    <option value="Sp&uuml;lmaschine">Sp&uuml;lmaschine</option>
													<option value="Fernseher">Fernseher</option>
												</select>
												<div class="help-block">Pflichtfeld, bitte ausf&uuml;llen!</div>
											</div>
											<div class="form-group">
												<label for"mceu_13" class="control-label">
													Beschreibung / initialer Chronik-Eintrag
												</label>
												<input id="mytextarea" >
												<div class="row panel panel-default" style="border-color: #C0C0C0; margin-left: 0px; margin-right: 0px; border-top-width: 0px; border-radius: 0px; margin-bottom: 0px; ">
													<div class="">



														<!--<div class="col-xs-6 col-md-3">
															<a href="#" class="thumbnail">
																<img src="" alt="">
															</a>
														</div>-->
													</div>
												</div>
												<div class="row panel panel-default" style="border-color: #C0C0C0; margin-left: 0px; margin-right: 0px; border-top-width: 0px; border-radius: 0px; margin-bottom: 0px; background-color: #F0F0F0;">
													<div class="panel-body">
														
														
														<button class="btn btn-default btn-file">
															<span class="glyphicon glyphicon-paperclip"></span>
															<span>Datei anf&uuml;gen</span> 
															<input type="file">
														</button>	
														<div class="" data-toggle="btn">
															<!--<button class="btn btn-default toggle-btn active">

																<span class="glyphicon glyphicon-eye-open"></span>
																<span>Eintrag kundensichtbar</span>
																<input type="radio" name="eintrag_kundensichtbar" id="eintrag_kundensichtbar" checked>
															</button>
															<button class="btn btn-default toggle-btn">

																<span class="glyphicon glyphicon-eye-close"></span>
																<span>Eintrag nicht kundensichtbar</span>
																<input type="radio" name="eintrag_kundensichtbar" id="eintrag_nichtkundensichtbar">
															</button>   -->
														</div>

													</div>
												</div>

											</div>
											<div class="panel-body" style="padding-bottom: 0px; margin-top: 45px;">
												<div class="row text-right">
													<div class="">
														<div>
															
															<button type="button" class="btn btn-primary navTabsNext pull-right" style="margin-top: 15px">

																<span>
																	weiter
																</span>
																<span class="glyphicon glyphicon-menu-right" aria-hidden="true">
																</span>
															</button>
														</div>
													</div>
												</div>
											</div>
										</div>

										<!-- Tab2 -->
										<div class="panel-body tab-pane" id="tab2">
											<div>
												<div id="contacts">
													<div id="contact_person" class="" style="margin-bottom: 35px">
														<div class="">
															<div class="row" style="padding-bottom: 15px"> 
																<label class="col-sm-3 pull-left">Ansprechpartner 1</label>
																<button class="close" style="padding-right: 15px" id="deleteContact" title="Kontakt entfernen">x</button>
															</div>
															<form cass="">
																<div class="row">
																	<div class="col-md-2 form-group">
																		<label for"anrede_input" class="control-label">
																			Anrede
																		</label>
																		<select class="mb-2 form-control" id="anrede_input">
																			<option selected></option>
																			<option value="Herr">Herr</option>
																			<option value="Frau">Frau</option>
																		</select>

																	</div>
																	<div class="col-md-5 form-group">
																		<label for"vorname_input" class="control-label">
																			Vorname *
																		</label>
																		<input id="vorname_input" class="form-control required" type="text">
																		<div class="help-block">Pflichtfeld, bitte ausf&uuml;llen!</div>
																	</div>
																	<div class="col-md-5 form-group">
																		<label for"nachname_input" class="control-label">
																			Nachname *
																		</label>
																		<input id="nachname_input" class="form-control required" type="text">
																		<div class="help-block">Pflichtfeld, bitte ausf&uuml;llen!</div>
																	</div>
																</div>
																<div class="row">
																	<div class="form-group col-md-12">
																		<label for"telefon_input" class="control-label">
																			Telefon
																		</label>
																		<input id="telefon_input" class="form-control" type="text">
																	</div>
																</div>
																<div class="row">
																	<div class="form-group col-md-9">
																		<label for"email_input" class="control-label">
																			eMail
																		</label>
																		<input id="email_input" class="form-control" type="text">
																	</div>
																	<div class="input-group col-md-3 pull-right">
																		<label for"wishesmails_input" class="control-label">
																			eMails an Kontakt senden
																		</label>
																		<input id="wishesmails_input" class="form-control" type="checkbox">
																	</div>
																</div>
															</form>
														</div>
													</div>
												</div>
												<div>
													<button class="btn panel-heading-btn btn-block pull-left" type="button" aria-hidden="true" style="margin-bottom: 15px; margin-top: 15px" id="addcontact">
														<span class="glyphicon glyphicon-plus">
														</span>
														<span>
															weiteren Kontakt hinzuf&uuml;gen
														</span>
													</button>
												</div>
												<div class="panel-body" style="padding-bottom: 0px; margin-top: 110px;">
													<div class="row text-right">
														<div class="">
															<div>
																<button type="button" class="btn btn-primary navTabsBack pull-left" style="margin-top: 15px">
																	<span class="glyphicon glyphicon-menu-left" aria-hidden="true">
																	</span>
																	<span>
																		zur&uuml;ck
																	</span>
																</button>
																<button type="button" class="btn btn-primary navTabsNext pull-right" style="margin-top: 15px">

																	<span>
																		weiter
																	</span>
																	<span class="glyphicon glyphicon-menu-right" aria-hidden="true">
																	</span>
																</button>
															</div>
														</div>
													</div>
												</div>
											</div>
										</div>

										<!-- Tab3 -->
										<div class="panel-body tab-pane" id="tab3">
											<div>
												<div class="form-group">
													<label for"abteilung_input" class="control-label">
														Abteilung *
													</label>
													<select class="mb-12 form-control required" id="abteilung_input">
														<option selected></option>
														<option value="Service/Reparatur">Service/Reparatur</option>
													</select>
													<div class="help-block">Pflichtfeld, bitte ausf&uuml;llen!</div>
												</div>
												<div class="form-group">
													<label for"kategorie_input" class="control-label">
														Ticket-Kategorie
													</label>
													<select class="mb-12 form-control" id="kategorie_input">
														<option selected></option>
														<option value="Reparatur">Reparatur</option>
														<option value="Ersaztteil bestellen">Ersaztteil bestellen</option>
														<option value="Ger&auml;t ersetzen">Ger&auml;t ersetzen</option>
													</select>
												</div>
												<div class="form-group">
													<label for"prioritaet_input" class="control-label">
														Ticket-Priorit&auml;t
													</label>
													<select class="mb-12 form-control" id="prioritaet_input">
														<option selected></option>
														<option value="hoch">hoch</option>
														<option value="niedrig">niedrig</option>
													</select>
												</div>
												<div class="form-group">
													<div class="form-group">
														<label for"aufwand_input" class="control-label">
															gesch&auml;tzter Stundenaufwand
														</label>
														<input id="aufwand_input" class="form-control" type="text">
													</div>
												</div>
												<div class="form-group">
													<div class="form-group">
														<label for"faellig_input" class="control-label">
															f&auml;llig bis
														</label>
														<input id="faellig_input" class="form-control datepicker" type="text">
													</div>
												</div>

												<div class="form-group">
													<label for"kundensichtbar_input" class="control-label">
														Ticket kundensichtbar
													</label>
													<div class="form-check form-check-inline">
														<label class="custom-control custom-radio" style="font-weight: normal">
															<input id="radio1" name="kundensichtbar_input"  value="ja" type="radio" class="custom-control-input">
															<span class="custom-control-indicator"></span>
															<span class="custom-control-description">ja</span>
														</label>
														<label class="custom-control custom-radio" style="font-weight: normal">
															<input id="radio2" name="kundensichtbar_input" type="radio" value="nein" class="custom-control-input">
															<span class="custom-control-indicator"></span>
															<span class="custom-control-description">nein</span>
														</label>
													</div>
												</div>
												<div class="panel-body" style="padding-bottom: 0px; margin-top: 20px;">
													<div class="row text-right">
														<div class="">
															<div>	
																<button type="button" class="btn btn-primary navTabsBack pull-left" style="margin-top: 15px">
																	<span class="glyphicon glyphicon-menu-left" aria-hidden="true">
																	</span>
																	<span>
																		zur&uuml;ck
																	</span>
																</button>											
																<button type="button" class="btn btn-primary navTabsNext pull-right" style="margin-top: 15px" id="continueToCheck">
																	<span class="glyphicon glyphicon-menu-right" aria-hidden="true">
																	</span>
																	<span>
																		weiter
																	</span>

																</button>
															</div>
														</div>
													</div>
												</div>
											</div>
										</div>

										<!-- Tab4 -->
										<div class="panel-body tab-pane" id="check">
											<div id="check_content">


												<div class="panel panel-default check-panel">   
													<div class="check-heading panel-heading clearfix">
														<h4 class="panel-title">
															<a role="button" data-toggle="collapse" href="#checkAnliegen" aria-expanded="true" aria-controls="checkAnliegen">
																<span class="glyphicon glyphicon-menu-down"> 
																</span>
																<span> 
																	Anliegen
																</span>
															</a>
														</h4>
													</div>
													<div id="checkAnliegen" class="panel-collapse collapse in panel-content" role="tabpanel" aria-labelledby="checkAnliegen">
														<div class="panel-body" style="border-width: 2px">
															<form class="form-horizontal">
																<div class="form-group">
																	<label for"subject" class="col-sm-2 control-label">
																		Betreff:
																	</label>
																	<div id="subject" class="form-control-static output col-sm-10" type="text">
																	</div>
																</div>
																<div class="form-group">
																	<label for"geraet" class="col-sm-2 control-label">
																		Ger&auml;t:
																	</label>
																	<div class="form-control-static output col-sm-10" id="geraet">
																	</div>
																</div>
																<div class="form-group">
																	<label for"description" class="col-sm-2 control-label">
																		Beschreibung:
																	</label>
																	<div class="form-control-static output col-sm-10" id="description">
																	</div>
																</div>
															</form>
														</div>
													</div>
												</div>
												<div class="panel panel-default check-panel">   
													<div class="check-heading panel-heading clearfix">
														<h4 class="panel-title">
															<a role="button" data-toggle="collapse" href="#checkKontakt" aria-expanded="true" aria-controls="checKontakt">
																<span class="glyphicon glyphicon-menu-down"> 
																</span>
																<span> 
																	Kontakt
																</span>
															</a>
														</h4>
													</div>
													<div id="checkKontakt" class="panel-collapse collapse in panel-content" role="tabpanel" aria-labelledby="checkKontakt">
														<div id="check_contact">
															<div class="panel-body" id="check_contact_person" style="border-width: 2px; border-top-style: solid;">
																<form class="form-horizontal">
																	<div class="form-group">
																		<label for"anrede" class="col-sm-2 control-label">
																			Ansprechpartner:
																		</label>
																		<div class="col-sm-10 form-control-static">
																			<div id="anrede" class="output" style="display: inline-block;">
																			</div>															
																			<div class="output" style="display: inline-block;" id="vorname">
																			</div>f
																			<div class="output" style="display: inline-block;" id="nachname">
																			</div>
																		</div>
																	</div>
																	<div class="form-group">
																		<label for"telefon" class="col-sm-2 control-label">
																			Telefon:
																		</label>
																		<div class="form-control-static output col-sm-10" id="telefon">
																		</div>
																	</div>
																	<div class="form-group">
																		<label for"email" class="col-sm-2 control-label">
																			eMail:
																		</label>
																		<div class="form-control-static output col-sm-10" id="email">
																		</div>
																	</div>
																	<div class="form-group">
																		<label for"wishesmails" class="col-sm-2 control-label">
																			eMails an Kontakt senden:
																		</label>
																		<div class="form-control-static output col-sm-10" id="wishesmails">
																		</div>
																	</div>
																</form>

															</div>
														</div> 
													</div>
												</div>

												<div class="panel panel-default check-panel">   
													<div class="check-heading panel-heading clearfix">
														<h4 class="panel-title">
															<a role="button" data-toggle="collapse" href="#checkSpezi" aria-expanded="true" aria-controls="checkSpezi">
																<span class="glyphicon glyphicon-menu-down"> 
																</span>
																<span> 
																	Spezifikation
																</span>
															</a>
														</h4>
													</div>
													<div id="checkSpezi" class="panel-collapse collapse in panel-content" role="tabpanel" aria-labelledby="checkSpezi">
														<div class="panel-body" style="border-width: 2px">
															<form class="form-horizontal">
																<div class="form-group">
																	<label for"abteilung" class="col-sm-2 control-label">
																		Abteilung:
																	</label>
																	<div class="form-control-static output col-sm-10" id="abteilung">

																	</div>
																</div>
																<div class="form-group">
																	<label for"kategorie" class="col-sm-2 control-label">
																		Ticket-Kategorie:
																	</label>
																	<div class="form-control-static output col-sm-10" id="kategorie">

																	</div>
																</div>
																<div class="form-group">
																	<label for"prioritaet" class="col-sm-2 control-label">
																		Ticket-Priorit&auml;t:
																	</label>
																	<div class="form-control-static output col-sm-10" id="prioritaet">

																	</div>
																</div>
																<div class="form-group">
																	<label for"aufwand" class="col-sm-2 control-label">
																		gesch&auml;tzter Stundenaufwand:
																	</label>
																	<div class="form-control-static output col-sm-10" id="aufwand">
																	</div>
																</div>
																<div class="form-group">
																	<label for"faellig" class="col-sm-2 control-label">
																		f&auml;llig bis:
																	</label>
																	<div class="form-control-static output col-sm-10" id="faellig">
																	</div>
																</div>

																<div class="form-group">
																	<label for"kundensichtbar" class="col-sm-2 control-label">
																		Ticket kundensichtbar:
																	</label>
																	<div class="form-control-static output col-sm-10" id="kundensichtbar">

																	</div>
																</div>
															</form>
														</div>
													</div> 
												</div>
												<h4>
												</h4>


												<!-- Ticket-Buttons -->
												
												<div class="panel-body" style="padding-bottom: 0px; margin-top: 45px;">
													<div id="rueckmeldung"></div>

													<div class="row text-right" style="margin-top: 15px">
														<div>
															<button type="button" class="btn btn-primary navTabsBack pull-left">
																<span class="glyphicon glyphicon-menu-left" aria-hidden="true">
																</span>
																<span>
																	zur&uuml;ck
																</span>
															</button>
															<button class="btn" aria-expanded="false">
																<span class="glyphicon glyphicon-remove" aria-hidden="true">
																</span>
																<span>
																	Verwerfen
																</span>
															</button>
															<button class="btn btn-primary" aria-expanded="false" id="finishTicket" data-toggle="modal" data-target="#modal_redir">

																<span>
																	Ticket fertig stellen
																</span>
																<span class="glyphicon glyphicon-menu-right" aria-hidden="true">
																</span>
															</button>
														</div>
													</div>
												</div>





												<!-- Modal -->               
												<div id="modal_redir" class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true" data-backdrop="static">
													<div class="modal-dialog modal-lg">
														<div class="modal-content">
															<div class="modal-header">

																<span class="glyphicon glyphicon-ok" aria-hidden="true">
																</span>
																<span class="modal-title" id="exampleModalLabel">
																	Ticket erfolgreich erstellt!
																</span>
															</div>
															<div class="modal-body" style="padding: 40px 50px 20px 50px;">

																<div>
																	<button class="btn btn-success btn-block small-tile-button" id="compareTicket">
																		
																		
																		
																		
																		<span class="glyphicon glyphicon-menu-right pull-right"
																		aria-hidden="true">
																		
																	</span>
																	<span>Ticket mit &auml;hnlichen Tickets vergleichen (
																	<span id=compticketsfound>3</span> Tickets gefunden)</span>
																	

																	
																	
																</button>
															</div>

															<div>
																<button class="btn btn-primary btn-block small-tile-button">
																	
																	
																	
																	
																	<span class="glyphicon glyphicon-menu-right pull-right"
																	aria-hidden="true">
																	
																</span>
																<span>Ticket an Dispatcher weitergeben</span>
																

																
																
															</button>
														</div>

														<div>
															<button class="btn btn-default btn-block small-tile-button" id="ticket_list_btn">
																
																
																
																
																<span class="glyphicon glyphicon-menu-left pull-left"
																aria-hidden="true">
																
															</span>
															<span>zur&uuml;ck zur Ticketliste</span>
															

															
															
														</button>
													</div>
												</div>


											</div>
															<!-- <div class="modal-footer">
																<button class="btn" aria-expanded="false"  class="close" data-dismiss="modal" aria-label="Close">
																	<span class="glyphicon glyphicon-remove" aria-hidden="true">
																	</span>
																	<span>
																		Abbrechen
																	</span>
																</button>
															</div>  -->  
														</div>
													</div>
												</div>








											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

</body>

</html>



<script type="text/javascript">


	$(document).ready(function () {

		/*disable non active tabs*/
		$('.nav.nav-steps li').addClass('disabled');
		$('.nav.nav-steps li').not('.active').find('a').removeAttr("data-toggle");


		//Wechsel der Tabs ueber Button 'weiter' + Validation
		$('.navTabsNext').click(function () {

			checkRequiredForms();

			//Tabwechsel nur falls keine unausgefuellten pflichtfelder
			if ($('.tab-pane.active .has-error').length==0){ 

				$('#navTabBar li.active').addClass('finished');
				$('#navTabBar li.active').addClass('finished').find('a').attr('data-toggle','tab');
				$('#navTabBar li.active').removeClass('disabled');
				//$('#navTabBar li.active').find('a').removeAttr("data-toggle");
				$('#navTabBar li.active').next('li').removeClass('disabled');
				$('#navTabBar li.active').next('li').find('a').attr('data-toggle','tab');
				$('#navTabBar li.active').next().find('a').trigger("click");

		    	//sobald check-tab erreicht, alle restlichen Tabs anwaehlbar
		    	if($('#navTabBar li.active').find('a').attr("href")=='#check'){
		    		if($('.nav.nav-steps li:first').hasClass('disabled')){
		    			$('.nav.nav-steps li').removeClass('disabled');
		    			$('.nav.nav-steps li').find('a').attr('data-toggle','tab');
		    			$('.nav.nav-steps li:not(:last)').find('a').append('<span style="padding-left:5px;" class="glyphicon glyphicon-pencil"></span>');
		    		};
		    	};
		    	$(document).scrollTop(($("#navTabBar").parent()).offset().top);
		    } 
		    else {
		    	focusFirstError();
		    };
		});

		//Wechsel der Tabs ueber Button 'zurueck'
		$('.navTabsBack').click(function () {

			$('#navTabBar li.active').prev().find('a').trigger("click");


			$(document).scrollTop(($("#navTabBar").parent()).offset().top);


		});

		 // Prueft bei Tabwechsel alle Pflichtfelder
  	   /* $('#navTabBar li a').click(function (event){
  	    	checkRequiredForms();
			//Tabwechsel nur falls keine unausgefuellten pflichtfelder
			if ($('.tab-pane.active .has-error').length!=0){ 
					//alert("error"+$('.tab-pane.active .has-error').length);
					focusFirstError();
					event.stopPropagation();
				};
			});*/




		//loescht Kontaktperson
		$('#deleteContact').click(function () {
			if($('#contacts').children().length>1){
				$(this).parents('#contact_person').remove();
				$('#contacts').children().each(function(index){
					$(this).find('label:first').text("Ansprechpartner "+(index+1));
				});
			}
			else {
				$(this).parents('#contact_person').find(':input').val('');
			}

		});

		//Kalender Pop-Up
		$( "#faellig_input" ).datepicker();





		//Aktualisieren der Textfelder im Uebersicht-Tab
		$('a[href="#check"]').click(function () {

			//Anzahl Kontakte zuruecksetzen
			$('#check_contact').children(':first').find('.output').each(function(){
				$(this).text("");
			});
			$('#check_contact').children(':gt(0)').remove();


			//fuellt alle vorhandenen Textfelder mit eingegebenen Input
			$('.output').each(function(){
				if ($('#'+this.id+'_input').val()=="") {
					$(this).text("");
				}
				else {
					$(this).text($('#'+this.id+'_input').val());
				}
			});
			$('#kundensichtbar').text($( "input[type=radio][name=kundensichtbar_input]:checked").val());
			if($('#wishesmails_input').is(':checked')){
				$('#wishesmails').text("ja");
			} 
			else {
				$('#wishesmails').text("nein");
			};
			//Inhalt tinyMCE
			$('#description').html(tinyMCE.activeEditor.getContent({format : 'raw'}));

      	    //Felder fuer mehrere Kontakte hinzufuegen + fuellen
      	    if ($('#contacts').children().length>1) {
      	    	$('#contacts').children(':gt(0)').each(function() {
      	    		$('#check_contact').children(':first').clone().appendTo($('#check_contact'));
      	    		fill_contact_checks(this);

      	    	});
      	    };
      	});

  	    //Kontakt-Form um weiteren Kontakt anfuegen + Inhalt ruecksetzen
  	    $('#addcontact').click(function () {
  	    	$('#contact_person').clone(':first').appendTo($('#contacts'));	
  	    	$('#contacts').children(':last').find('label:first').text("Ansprechpartner "+$('#contacts').children().length);
  	    	$('#contacts').children(':last').find(':input').val('');
  	    });



  	    //mit Error ausgef√ºllte Pflichtfelder bei Verlassen des Feldes von Error befreien
  	    $(':input').blur(function() {
  	    	if ($(this).closest('.form-group').hasClass('has-error')){
  	    		if($(this).val()!=""){
  	    			$(this).closest('.form-group').removeClass('has-error');
  	    			//alert($(this).val());
  	    		}
  	    	}

  	    });


  	    $(':file').on('fileselect', function(event, numFiles, label) {
  	    	console.log(numFiles);
  	    	console.log(label);
  	    });


  	    //Ticket abschliessen mit Rueckmeldung und Weiterleitung auf Ticket-Liste

  	     $('#finishTicket').click(function () {
  	     	var newticketcount = Number(localStorage.getItem('newticketcount'))+3;
  	     	$('#compticketsfound').text(newticketcount);
  	     	saveNewTicket();
  	    });

  	    $('#compareTicket').click(function () {





  	    	
  	    	setTimeout(function () {
  	    		window.location.href = "ticket_vergleichen.html";
  	    	}, 1000);
  	    });

  	    $('#ticket_list_btn').click(function () {
  	    	  	    	
  	    	setTimeout(function () {
  	    		window.location.href = "ticket_liste_annahme.html";
  	    	}, 1000);
  	    });





  	});


function saveNewTicket(){
	var newticketcount = localStorage.getItem('newticketcount');
	if (newticketcount=='null') {
		newticketcount = 0;
	} else {
		newticketcount++;
		localStorage.setItem('newticketcount', newticketcount);
	}
	//alert(newticketcount+1);
	var ticketlist = {};

	var ticket = {};
  	    	ticket.subject = $('#subject_input').val();
  	    	ticket.geraet = $('#geraet_input').val();
  	    	ticket.description= tinyMCE.activeEditor.getContent();

  	    	ticket.anrede= $('#anrede').text();
  	    	ticket.vorname = $('#vorname_input').val();
  	    	ticket.nachname = $('#nachname_input').val();
  	    	ticket.telefon = $('#telefon_input').val();
  	    	ticket.email = $('#email_input').val();
  	    	ticket.wishesmails= $('#wishesmails').text();

  	    	ticket.abteilung = $('#abteilung_input').val();
  	    	ticket.aufwand = $('#aufwand_input').val();
  	    	ticket.kategorie = $('#kategorie_input').val();
  	    	ticket.prioritaet = $('#prioritaet_input').val();
  	    	ticket.faellig = $('#faellig_input').val();
  	    	ticket.kundensichtbar = $('#kundensichtbar').text();
  	    	ticket.chronikCommentCounter = 0;
  	    	ticket.chronikComments = [];
  	    	

  	    	localStorage.setItem('ticket'+newticketcount, JSON.stringify(ticket) );
  	    	localStorage.setItem('newticket', true);

};



function fill_contact_checks(elem_with_inputs){
	$('#check_contact').children(':last').find('.output').each(function(){
		if ($(elem_with_inputs).find('#'+this.id+'_input').val()=="") {
			$(this).text("");
		}
		else {
			$(this).text($(elem_with_inputs).find('#'+this.id+'_input').val())
		}
	});
	//alert($(elem_with_inputs).find('#wishesmails_input').is(':checked'));
	if($(elem_with_inputs).find('#wishesmails_input').is(':checked')){
		$('#check_contact').children(':last').find('#wishesmails').text("ja");
	} 
	else {
		$('#check_contact').children(':last').find('#wishesmails').text("nein");
	};

};

function checkRequiredForms(){
	$('.tab-pane.active .required').each(function(){
		if($(this).val()===""){
			$(this).closest('.form-group').addClass('has-error');
		}
		else {
			$(this).closest('.form-group').removeClass('has-error');
		}
	});

};

function focusFirstError(){
	var firstElemWithError = $('.tab-pane.active').find('.has-error').first().find(':input');
	firstElemWithError.focus();
	$(document).scrollTop((firstElemWithError.parent()).offset().top-50);
};




</script>